function OptionSelector(t){"use strict";var n=this;if(!t.lists||!Array.isArray(t.lists)||!t.lists.length)throw"There must be atleast one list defined in options.";function a(t){var s,i;l.enabled&&(s=$(t.target).closest("."+l.settings.css.listItemClass),i=l.activeListIndex,$.each(l.uiLists,function(t,e){e.is(s.parent())&&(i=t)}),this.setSelectedIndex(s.data(l.settings.itemDataAttribute),i),null!=l.settings.events.onClicked&&l.settings.events.onClicked.call(this,s))}var l={visible:!0,enabled:!0,settings:null,data:null,selectedIndexes:[],uiRoot:null,uiRootList:null,uiLists:[],activeListIndex:0},e=(l.settings=$.extend(!0,{},{lists:[],data:null,itemDataAttribute:"index",defaultListIndex:0,defaultIndex:-1,visible:!0,enabled:!0,css:{hideRootClass:"root-selector-hide",rootClass:"root-selector",rootListClass:"root-selector-list",rootListItemClass:"root-selector-list-item",listClass:"selector-list",listItemClass:"selector-list-item",selectedListItemClass:"selector-list-selected-item"},mainListTemplate:"<ul></ul>",mainListItemTemplate:"<li></li>",listTemplate:"<ul></ul>",itemTemplate:"<li></li>",events:{onClicked:function(t){},onSelectionChanged:function(t){},onVisibilityChanged:function(t){}},extensions:{formatter:function(t){}}},t),l.visible=l.settings.visible,l.enabled=l.settings.enabled,l.uiRoot=$("<div></div>").addClass(l.settings.css.rootClass),l.uiRootList=$(l.settings.mainListTemplate).addClass(l.settings.css.rootListClass).appendTo(l.uiRoot),$.each(l.settings.lists,function(t,e){l.selectedIndexes[t]=-1;t=$(l.settings.listTemplate).addClass(l.settings.css.listClass).addClass(e.listClass),e=$(l.settings.mainListItemTemplate).addClass(l.settings.css.rootListItemClass).append(t);l.uiRootList.append(e).addClass(l.settings.css.rootListClass),l.uiLists.push(t)}),l.activeListIndex=-1<l.settings.defaultListIndex?l.settings.defaultListIndex:0,this.getUIRoot=function(){return l.uiRoot},this.getUILists=function(){return l.uiLists},this.getEnabled=function(){return l.enabled},this.setEnabled=function(t){l.enabled=!!t},this.getData=function(){return l.data},this.setData=function(t){this.clear(),t&&Array.isArray(t)&&t.length==l.uiLists.length&&(l.data=t,e(),this.setSelectedIndex())},this.getListCount=function(){return l.uiLists.length},this.getListItemCount=function(t){if(l.uiLists[t])return l.uiLists[t].children().length},this.getVisible=function(){return l.visible},this.setVisible=function(t){var e=!1;t&&!l.visible?(l.uiRoot.removeClass(l.settings.css.hideRootClass),e=l.visible=!0):!t&&l.visible&&(l.uiRoot.addClass(l.settings.css.hideRootClass),e=!(l.visible=!1)),e&&null!=l.settings.events.onVisibilityChanged&&l.enabled&&l.settings.events.onVisibilityChanged.call(this,l.visible)},l.visible||l.uiRoot.addClass(l.settings.css.hideRootClass),this.clear=function(){l.data=null,$.each(l.uiLists,function(t,e){e.empty()}),$.each(l.selectedIndexes,function(t,e){}),l.activeListIndex=-1<l.settings.defaultListIndex?l.settings.defaultListIndex:0},this.getSelectedDataItem=function(){return l.data&&-1<l.activeListIndex&&-1<l.selectedIndexes[l.activeListIndex]?l.data[l.activeListIndex][l.selectedIndexes[l.activeListIndex]]:null},this.getSelectedIndex=function(){return l.data&&-1<l.activeListIndex&&-1<l.selectedIndexes[l.activeListIndex]?{listIndex:l.activeListIndex,listItemIndex:l.selectedIndexes[l.activeListIndex]}:null},this.setSelectedIndex=function(t,e){var n,a;e==l.activeListIndex&&t==l.selectedIndexes[l.activeListIndex]||(n="number"!=typeof e?l.activeListIndex:e,a="number"!=typeof t?l.settings.defaultIndex:t,-1<n&&n<l.uiLists.length&&-1<a&&a<l.uiLists[n].children().length&&($.each(l.uiLists,function(s){var t=l.uiLists[s].children(),i=l.settings.lists[s].selectedListItemClass;t.each(function(t,e){d(i,$(e),s!=n?-1:a,t)}),l.activeListIndex=n,l.selectedIndexes[l.activeListIndex]=a}),"number"==typeof t&&null!=l.settings.events.onSelectionChanged&&l.enabled&&l.settings.events.onSelectionChanged.call(this,{activeListIndex:l.activeListIndex,activeListItemIndex:a})))},function(){l.data&&$.each(l.settings.lists,function(t,i){var n=l.uiLists[t];l.data[t]&&$.each(l.data[t],function(t,e){var s=$(l.settings.itemTemplate).data(l.settings.itemDataAttribute,t).addClass(l.settings.css.listItemClass).addClass(i.listItemClass);l.settings.extensions.formatter?s.append(l.settings.extensions.formatter(e,s)):s.text(e),d(i.selectedListItemClass,s,-1,t),n.append(s)})})}),d=function(t,e,s,i){s!=i?e.removeClass(l.settings.css.selectedListItemClass).removeClass(t):e.hasClass(t)||e.addClass(l.settings.css.selectedListItemClass).addClass(t)};$.each(l.uiLists,function(t,e){var s,i;e.on("click","> *",(i=n,(s=a).bind?s.bind(i):function(){s.apply(i,arguments)}))}),l.settings.data&&this.setData(l.settings.data)}