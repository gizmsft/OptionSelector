function OptionSelector(t){"use strict";var n=this;if(!t.lists||!Array.isArray(t.lists)||!t.lists.length)throw"There must be atleast one list defined in options.";function l(t){var s,i;a.enabled&&(s=$(t.target).closest("."+a.settings.css.listItemClass),i=a.activeListIndex,$.each(a.uiLists,function(t,e){e.is(s.parent())&&(i=t)}),this.setSelectedIndex(s.data(a.settings.itemDataAttribute),i),null!=a.settings.events.onClicked&&a.settings.events.onClicked.call(this,s))}var a={visible:!0,enabled:!0,settings:null,data:null,selectedIndexes:[],uiRoot:null,uiRootList:null,uiLists:[],activeListIndex:0},e=(a.settings=$.extend(!0,{},{lists:[],data:null,itemDataAttribute:"index",defaultListIndex:0,defaultIndex:-1,visible:!0,enabled:!0,css:{hideRootClass:"root-selector-hide",rootClass:"root-selector",rootListClass:"root-selector-list",rootListItemClass:"root-selector-list-item",listClass:"selector-list",listItemClass:"selector-list-item",selectedListItemClass:"selector-list-item-selected"},mainListTemplate:"<ul></ul>",mainListItemTemplate:"<li></li>",listTemplate:"<ul></ul>",itemTemplate:"<li></li>",events:{onClicked:function(t){},onSelectionChanged:function(t){},onVisibilityChanged:function(t){}},extensions:{formatter:function(t){}}},t),a.visible=a.settings.visible,a.enabled=a.settings.enabled,a.uiRoot=$("<div></div>").addClass(a.settings.css.rootClass),a.uiRootList=$(a.settings.mainListTemplate).addClass(a.settings.css.rootListClass).appendTo(a.uiRoot),$.each(a.settings.lists,function(t,e){a.selectedIndexes[t]=-1;t=$(a.settings.listTemplate).addClass(a.settings.css.listClass).addClass(e.listClass),e=$(a.settings.mainListItemTemplate).addClass(a.settings.css.rootListItemClass).append(t);a.uiRootList.append(e).addClass(a.settings.css.rootListClass),a.uiLists.push(t)}),a.activeListIndex=-1<a.settings.defaultListIndex?a.settings.defaultListIndex:0,this.getUIRoot=function(){return a.uiRoot},this.getUILists=function(){return a.uiLists},this.getEnabled=function(){return a.enabled},this.setEnabled=function(t){a.enabled=!!t},this.getData=function(){return a.data},this.setData=function(t){this.clear(),t&&Array.isArray(t)&&t.length==a.uiLists.length&&(a.data=t,e(),this.setSelectedIndex())},this.getListCount=function(){return a.uiLists.length},this.getListItemCount=function(t){if(a.uiLists[t])return a.uiLists[t].children().length},this.getVisible=function(){return a.visible},this.setVisible=function(t){var e=!1;t&&!a.visible?(a.uiRoot.removeClass(a.settings.css.hideRootClass),e=a.visible=!0):!t&&a.visible&&(a.uiRoot.addClass(a.settings.css.hideRootClass),e=!(a.visible=!1)),e&&null!=a.settings.events.onVisibilityChanged&&a.enabled&&a.settings.events.onVisibilityChanged.call(this,a.visible)},a.visible||a.uiRoot.addClass(a.settings.css.hideRootClass),this.clear=function(){a.data=null,$.each(a.uiLists,function(t,e){e.empty()}),$.each(a.selectedIndexes,function(t,e){}),a.activeListIndex=-1<a.settings.defaultListIndex?a.settings.defaultListIndex:0},this.getSelectedDataItem=function(){return a.data&&-1<a.activeListIndex&&-1<a.selectedIndexes[a.activeListIndex]?a.data[a.activeListIndex][a.selectedIndexes[a.activeListIndex]]:null},this.getSelectedIndex=function(){return a.data&&-1<a.activeListIndex&&-1<a.selectedIndexes[a.activeListIndex]?{listIndex:a.activeListIndex,listItemIndex:a.selectedIndexes[a.activeListIndex]}:null},this.setSelectedIndex=function(t,e){var n,l;e==a.activeListIndex&&t==a.selectedIndexes[a.activeListIndex]||(n="number"!=typeof e?a.activeListIndex:e,l="number"!=typeof t?a.settings.defaultIndex:t,-1<n&&n<a.uiLists.length&&-1<l&&l<a.uiLists[n].children().length&&($.each(a.uiLists,function(s){var t=a.uiLists[s].children(),i=a.settings.lists[s].selectedListItemClass;t.each(function(t,e){d(i,$(e),n,s!=n?-1:l,t)}),a.activeListIndex=n,a.selectedIndexes[a.activeListIndex]=l}),"number"==typeof t&&null!=a.settings.events.onSelectionChanged&&a.enabled&&a.settings.events.onSelectionChanged.call(this,{activeListIndex:a.activeListIndex,activeListItemIndex:l})))},function(){a.data&&$.each(a.settings.lists,function(t,i){var n=a.uiLists[t];a.data[t]&&$.each(a.data[t],function(t,e){var s=$(a.settings.itemTemplate).data(a.settings.itemDataAttribute,t).addClass(a.settings.css.listItemClass).addClass(i.listItemClass);a.settings.extensions.formatter?s.append(a.settings.extensions.formatter(e,s)):s.text(e),d(i.selectedListItemClass,s,-1,-1,t),n.append(s)})})}),d=function(t,e,s,i,n){var l=null,l=(l=-1<s?a.settings.lists[s].selectedItemClass:l)||a.settings.css.selectedListItemClass;i!=n?e.removeClass(l).removeClass(t):e.hasClass(t)||e.addClass(l).addClass(t)};$.each(a.uiLists,function(t,e){var s,i;e.on("click","> *",(i=n,(s=l).bind?s.bind(i):function(){s.apply(i,arguments)}))}),a.settings.data&&this.setData(a.settings.data)}